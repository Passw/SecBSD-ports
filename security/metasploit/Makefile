COMMENT=	metasploit framework

VERSION=	6.3.19
DISTNAME=	metasploit-framework-${VERSION}
DISTFILES=	${VERSION}.tar.gz

CATEGORIES=	security

HOMEPAGE=	https://www.metasploit.com

MAINTAINER=	Purple Rain <purplerain@secbsd.org>

# BSD-3-clause
PERMIT_PACKAGE=	Yes

MASTER_SITES=	https://github.com/rapid7/metasploit-framework/archive/

EXTRACT_ONLY=

MODULES=	lang/ruby
MODRUBY_REV=	3.0

BUILD_DEPENDS+=${RUN_DEPENDS} \
		archivers/ruby-rubyzip,${MODRUBY_FLAVOR} \
		converters/ruby-multi-json,${MODRUBY_FLAVOR} \
		databases/postgresql \
		databases/ruby-pg,${MODRUBY_FLAVOR} \
		databases/ruby-sqlite3,${MODRUBY_FLAVOR} \
		devel/ruby-actionpack,${MODRUBY_FLAVOR} \
		devel/ruby-actionview,${MODRUBY_FLAVOR} \
		devel/ruby-activerecord,${MODRUBY_FLAVOR} \
		devel/ruby-activesupport,${MODRUBY_FLAVOR} \
		devel/ruby-afm,${MODRUBY_FLAVOR} \
		devel/ruby-arel-helpers,${MODRUBY_FLAVOR} \
		devel/ruby-ascii85,${MODRUBY_FLAVOR} \
		devel/ruby-ast,${MODRUBY_FLAVOR} \
		devel/ruby-aws-eventstream,${MODRUBY_FLAVOR} \
		devel/ruby-aws-partitions,${MODRUBY_FLAVOR} \
		devel/ruby-aws-sdk-core,${MODRUBY_FLAVOR} \
		devel/ruby-aws-sdk-ec2,${MODRUBY_FLAVOR} \
		devel/ruby-aws-sdk-iam,${MODRUBY_FLAVOR} \
		devel/ruby-aws-sdk-kms,${MODRUBY_FLAVOR} \
		devel/ruby-aws-sdk-s3,${MODRUBY_FLAVOR} \
		devel/ruby-aws-sdk-ssm,${MODRUBY_FLAVOR} \
		devel/ruby-aws-sigv4,${MODRUBY_FLAVOR} \
		devel/ruby-bcrypt-pbkdf,${MODRUBY_FLAVOR} \
		devel/ruby-bindata,${MODRUBY_FLAVOR} \
		devel/ruby-bootsnap,${MODRUBY_FLAVOR} \
		devel/ruby-bson,${MODRUBY_FLAVOR} \
		devel/ruby-byebug,${MODRUBY_FLAVOR} \
		devel/ruby-coderay,${MODRUBY_FLAVOR} \
		devel/ruby-concurrent-ruby,${MODRUBY_FLAVOR} \
		devel/ruby-cookiejar,${MODRUBY_FLAVOR} \
		devel/ruby-crass,${MODRUBY_FLAVOR} \
		devel/ruby-daemons,${MODRUBY_FLAVOR} \
		devel/ruby-debug,${MODRUBY_FLAVOR} \
		devel/ruby-diff-lcs,${MODRUBY_FLAVOR} \
		devel/ruby-dnsruby,${MODRUBY_FLAVOR} \
		devel/ruby-docile,${MODRUBY_FLAVOR} \
		devel/ruby-domain-name,${MODRUBY_FLAVOR} \
		devel/ruby-ed25519,${MODRUBY_FLAVOR} \
		devel/ruby-em-http-request,${MODRUBY_FLAVOR} \
		devel/ruby-em-socksify,${MODRUBY_FLAVOR} \
		devel/ruby-erubi,${MODRUBY_FLAVOR} \
		devel/ruby-eventmachine,${MODRUBY_FLAVOR} \
		devel/ruby-factory-bot,${MODRUBY_FLAVOR} \
		devel/ruby-factory-bot-rails,${MODRUBY_FLAVOR} \
		devel/ruby-faker,${MODRUBY_FLAVOR} \
		devel/ruby-faraday,${MODRUBY_FLAVOR} \
		devel/ruby-faraday-net-http,${MODRUBY_FLAVOR} \
		devel/ruby-faraday-retry,${MODRUBY_FLAVOR} \
		devel/ruby-faye-websocket,${MODRUBY_FLAVOR} \
		devel/ruby-ffi,${MODRUBY_FLAVOR} \
		devel/ruby-filesize,${MODRUBY_FLAVOR} \
		devel/ruby-fivemat,${MODRUBY_FLAVOR} \
		devel/ruby-gssapi,${MODRUBY_FLAVOR} \
		devel/ruby-gyoku,${MODRUBY_FLAVOR} \
		devel/ruby-hashery,${MODRUBY_FLAVOR} \
		devel/ruby-hrr-rb-ssh,${MODRUBY_FLAVOR} \
		devel/ruby-hrr-rb-ssh-ed25519,${MODRUBY_FLAVOR} \
		devel/ruby-http-cookie,${MODRUBY_FLAVOR} \
		devel/ruby-http-parser,${MODRUBY_FLAVOR} \
		devel/ruby-httpclient,${MODRUBY_FLAVOR} \
		devel/ruby-i18n,${MODRUBY_FLAVOR} \
		devel/ruby-io-console,${MODRUBY_FLAVOR} \
		devel/ruby-irb,${MODRUBY_FLAVOR} \
		devel/ruby-jmespath,${MODRUBY_FLAVOR} \
		devel/ruby-jsobfu,${MODRUBY_FLAVOR} \
		devel/ruby-json,${MODRUBY_FLAVOR} \
		devel/ruby-little-plugger,${MODRUBY_FLAVOR} \
		devel/ruby-logging,${MODRUBY_FLAVOR} \
		devel/ruby-loofah,${MODRUBY_FLAVOR} \
		devel/ruby-macho,${MODRUBY_FLAVOR} \
		devel/ruby-memory-profiler,${MODRUBY_FLAVOR} \
		devel/ruby-metasm,${MODRUBY_FLAVOR} \
		devel/ruby-metasploit-concern,${MODRUBY_FLAVOR} \
		devel/ruby-metasploit-credential,${MODRUBY_FLAVOR} \
		devel/ruby-metasploit-data-models,${MODRUBY_FLAVOR} \
		devel/ruby-metasploit-model,${MODRUBY_FLAVOR} \
		devel/ruby-metasploit-payloads,${MODRUBY_FLAVOR} \
		devel/ruby-metasploit-payloads-mettle,${MODRUBY_FLAVOR} \
		devel/ruby-method-source,${MODRUBY_FLAVOR} \
		devel/ruby-mini_portile2,${MODRUBY_FLAVOR} \
		devel/ruby-minitest,${MODRUBY_FLAVOR} \
		devel/ruby-mqtt,${MODRUBY_FLAVOR} \
		devel/ruby-nessus-rest,${MODRUBY_FLAVOR} \
		devel/ruby-nio4r,${MODRUBY_FLAVOR} \
		devel/ruby-nori,${MODRUBY_FLAVOR} \
		devel/ruby-ntlm,${MODRUBY_FLAVOR} \
		devel/ruby-octokit,${MODRUBY_FLAVOR} \
		devel/ruby-openssl-ccm,${MODRUBY_FLAVOR} \
		devel/ruby-openssl-cmac,${MODRUBY_FLAVOR} \
		devel/ruby-openvas-omp,${MODRUBY_FLAVOR} \
		devel/ruby-packetfu,${MODRUBY_FLAVOR} \
		devel/ruby-parallel,${MODRUBY_FLAVOR} \
		devel/ruby-parser,${MODRUBY_FLAVOR} \
		devel/ruby-patch-finder,${MODRUBY_FLAVOR} \
		devel/ruby-pcaprub,${MODRUBY_FLAVOR} \
		devel/ruby-pdf-reader,${MODRUBY_FLAVOR} \
		devel/ruby-prof,${MODRUBY_FLAVOR} \
		devel/ruby-progressbar,${MODRUBY_FLAVOR} \
		devel/ruby-pry,${MODRUBY_FLAVOR} \
		devel/ruby-pry-byebug,${MODRUBY_FLAVOR} \
		devel/ruby-racc,${MODRUBY_FLAVOR} \
		devel/ruby-rack-protection,${MODRUBY_FLAVOR} \
		devel/ruby-rails-dom-testing,${MODRUBY_FLAVOR} \
		devel/ruby-rails-html-sanitizer,${MODRUBY_FLAVOR} \
		devel/ruby-railties,${MODRUBY_FLAVOR} \
		devel/ruby-rainbow,${MODRUBY_FLAVOR} \
		devel/ruby-rake,${MODRUBY_FLAVOR} \
		devel/ruby-rasn1,${MODRUBY_FLAVOR} \
		devel/ruby-rb-readline,${MODRUBY_FLAVOR} \
		devel/ruby-rc4,${MODRUBY_FLAVOR} \
		devel/ruby-recog,${MODRUBY_FLAVOR} \
		devel/ruby-regexp_parser,${MODRUBY_FLAVOR} \
		devel/ruby-reline,${MODRUBY_FLAVOR} \
		devel/ruby-rex-arch,${MODRUBY_FLAVOR} \
		devel/ruby-rex-bin-tools,${MODRUBY_FLAVOR} \
		devel/ruby-rex-core,${MODRUBY_FLAVOR} \
		devel/ruby-rex-encoder,${MODRUBY_FLAVOR} \
		devel/ruby-rex-exploitation,${MODRUBY_FLAVOR} \
		devel/ruby-rex-java,${MODRUBY_FLAVOR} \
		devel/ruby-rex-mime,${MODRUBY_FLAVOR} \
		devel/ruby-rex-nop,${MODRUBY_FLAVOR} \
		devel/ruby-rex-ole,${MODRUBY_FLAVOR} \
		devel/ruby-rex-powershell,${MODRUBY_FLAVOR} \
		devel/ruby-rex-random-identifier,${MODRUBY_FLAVOR} \
		devel/ruby-rex-registry,${MODRUBY_FLAVOR} \
		devel/ruby-rex-rop-builder,${MODRUBY_FLAVOR} \
		devel/ruby-rex-socket,${MODRUBY_FLAVOR} \
		devel/ruby-rex-sslscan,${MODRUBY_FLAVOR} \
		devel/ruby-rex-struct2,${MODRUBY_FLAVOR} \
		devel/ruby-rex-text,${MODRUBY_FLAVOR} \
		devel/ruby-rex-zip,${MODRUBY_FLAVOR} \
		devel/ruby-rkelly-remix,${MODRUBY_FLAVOR} \
		devel/ruby-rspec-rails,${MODRUBY_FLAVOR} \
		devel/ruby-rspec-rerun,${MODRUBY_FLAVOR} \
		devel/ruby-rspec/3/core,${MODRUBY_FLAVOR} \
		devel/ruby-rspec/3/expectations,${MODRUBY_FLAVOR} \
		devel/ruby-rspec/3/mocks,${MODRUBY_FLAVOR} \
		devel/ruby-rspec/3/rspec,${MODRUBY_FLAVOR} \
		devel/ruby-rspec/3/support,${MODRUBY_FLAVOR} \
		devel/ruby-rubocop,${MODRUBY_FLAVOR} \
		devel/ruby-rubocop-ast,${MODRUBY_FLAVOR} \
		devel/ruby-ruby2-keywords,${MODRUBY_FLAVOR} \
		devel/ruby-sawyer,${MODRUBY_FLAVOR} \
		devel/ruby-simplecov,${MODRUBY_FLAVOR} \
		devel/ruby-simplecov-html,${MODRUBY_FLAVOR} \
		devel/ruby-simpleidn,${MODRUBY_FLAVOR} \
		devel/ruby-smb,${MODRUBY_FLAVOR} \
		devel/ruby-sshkey,${MODRUBY_FLAVOR} \
		devel/ruby-strptime,${MODRUBY_FLAVOR} \
		devel/ruby-swagger-blocks,${MODRUBY_FLAVOR} \
		devel/ruby-thor,${MODRUBY_FLAVOR} \
		devel/ruby-tilt,${MODRUBY_FLAVOR} \
		devel/ruby-timecop,${MODRUBY_FLAVOR} \
		devel/ruby-timeout,${MODRUBY_FLAVOR} \
		devel/ruby-ttfunk,${MODRUBY_FLAVOR} \
		devel/ruby-tzinfo-data,${MODRUBY_FLAVOR} \
		devel/ruby-unf,${MODRUBY_FLAVOR} \
		devel/ruby-unf-ext,${MODRUBY_FLAVOR} \
		devel/ruby-unicode-display-width,${MODRUBY_FLAVOR} \
		devel/ruby-unix-crypt,${MODRUBY_FLAVOR} \
		devel/ruby-warden,${MODRUBY_FLAVOR} \
		devel/ruby-webrick,${MODRUBY_FLAVOR} \
		devel/ruby-websocket-driver,${MODRUBY_FLAVOR} \
		devel/ruby-win32api,${MODRUBY_FLAVOR} \
		devel/ruby-windows-error,${MODRUBY_FLAVOR} \
		devel/ruby-winrm,${MODRUBY_FLAVOR} \
		devel/ruby-xdr,${MODRUBY_FLAVOR} \
		devel/ruby-xmlrpc,${MODRUBY_FLAVOR} \
		devel/ruby-zeitwerk,${MODRUBY_FLAVOR} \
		graphics/ruby-chunky_png,${MODRUBY_FLAVOR} \
		net/ruby-msgpack,${MODRUBY_FLAVOR} \
		net/ruby-net-ldap,${MODRUBY_FLAVOR} \
		net/ruby-net-protocol,${MODRUBY_FLAVOR} \
		net/ruby-net-smtp,${MODRUBY_FLAVOR} \
		net/ruby-net-ssh,${MODRUBY_FLAVOR} \
		net/ruby-network-interface,${MODRUBY_FLAVOR} \
		net/ruby-public-suffix,${MODRUBY_FLAVOR} \
		security/ruby-bcrypt,${MODRUBY_FLAVOR} \
		security/ruby-nexpose,${MODRUBY_FLAVOR} \
		sysutils/ruby-tzinfo,${MODRUBY_FLAVOR} \
		textproc/ruby-builder,${MODRUBY_FLAVOR} \
		textproc/ruby-nokogiri,${MODRUBY_FLAVOR} \
		textproc/ruby-redcarpet,${MODRUBY_FLAVOR} \
		textproc/ruby-yard,${MODRUBY_FLAVOR} \
		www/ruby-addressable,${MODRUBY_FLAVOR} \
		www/ruby-mustermann,${MODRUBY_FLAVOR} \
		www/ruby-puma,${MODRUBY_FLAVOR} \
		www/ruby-rack,${MODRUBY_FLAVOR} \
		www/ruby-rack-test,${MODRUBY_FLAVOR} \
		www/ruby-sinatra,${MODRUBY_FLAVOR} \
		www/ruby-thin,${MODRUBY_FLAVOR}

NO_BUILD=	Yes
NO_TEST=	Yes

INSTDIR=	${PREFIX}/share/metasploit

do-install:
	${INSTALL_DATA_DIR} ${INSTDIR}
	tar xzf ${FULLDISTDIR}/${DISTFILES} \
	-C ${INSTDIR}
	mv ${INSTDIR}/${DISTNAME}/* ${INSTDIR}

.include <bsd.port.mk>
